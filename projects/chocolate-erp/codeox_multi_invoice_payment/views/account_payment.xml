<?xml version="1.0" encoding="utf-8"?>
<odoo>

      <record id="view_account_payment_form_inherited" model="ir.ui.view">
        <field name="name">Payment: Multi Invoice Payment View</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_form" />
        <field name="arch" type="xml">
            <xpath expr="//div[@name='amount_div']" position="after">
                <field name="assigned_payment_amount" readonly="1" />
                <field name="difference_payment_amount" readonly="1" />
            </xpath>
            <xpath expr="//group[@name='main_group']" position="after">
                <notebook>
                    <page string="Multi Invoice Payment">
                        <field
                            name="invoice_payment_allocation_ids"
                            readonly="state != 'draft'"
                        >
                            <list string="Payment Allocations" editable="bottom">
                                <field name="payment_id" column_invisible="1" />
                                <field name="move_id" domain="move_id_domain" />
                                <field name="move_amount_paid" />
                                <field name="move_amount_due" />
                                <field name="mark_fully_paid" />
                                <field name="amount" />
                                <field name="currency_id" column_invisible="1" />
                                <field name="move_id_domain" column_invisible="1" />
                                <field name="company_id" column_invisible="1" />
                            </list>
                        </field>
                    </page>
                </notebook>
            </xpath>
        </field>
    </record>

</odoo>
